# Лабораторная работа №4
# Аутентификация

| Студент | *Федоров Антон Сергеевич* |
|------|------|
| Группа  | *М8О-114М-23* |

## Запуск в докере
В папке lab4 выполнить команду `docker compose up`.

## Генерация таблицы пользователей, колекции сообщений и записей 
При выполнении команды `docker compose up` коллекция сообщений и записей автоматически пересоздается с 10-ю сгенерированными документами относительно трех пользователей. Таблица пользователей автоматически создается с тремся записями. Изменить количество генерируемых документов или записей можно переписав параметры запуска скрипта `start_and_gen_messages.sh` для сервиса `message_service` или `start_and_gen_posts.sh` для сервиса `post_service`, или `start_and_gen_users.sh` для сервиса `user_service` в файле `docker-compose.yml` следующим образом: 

`entrypoint: /bin/sh -c "lab4/start_and_gen_messages.sh <количество генерируемых сообщений> <количество пользователей>"`

`entrypoint: /bin/sh -c "lab4/start_and_gen_posts.sh <количество генерируемых сообщений> <количество пользователей>"`

`entrypoint: /bin/sh -c "lab4/start_and_gen_users.sh <количество генерируемых пользователей>

## Тестирование
После успешного запуска сервиса, протестировать его работу можно двумя способами (если обращение с помощью первого не получилось, то стоит попробовать остальные):
1. Расширение OpenAPI (Swagger) Editor для VS Code
    1. Установить расширение Расширение OpenAPI (Swagger) Editor, если еще не установлено.
    2. Открыть файл user.yaml, messages.yaml или posts.yaml, находящийся в папке lab4.
    3. В секции paths сразу под типом интересующего запроса нажать на надпить "Try it". 
    4. В открывшейся вкладке определить параметры и тело запроса.
    5. Отправить интересующий запрос, нажав на кнопку "Send".  
2. Postman
    1. Зарегистрироваться в Postman.
    2. Использовать web-версию или клиентское приложение.
    3. Импортировать файлы `postman/lab4_message_server.postman_collection.json`, `postman/lab4_post_server.postman_collection.json`, `postman/lab4_user_server.postman_collection.json` в рабочее пространство.
    4. Перейти в коллекцию `lab4_message_server`, `lab4_post_server` или `lab4_user_server`.
    5. Выбрать интересующий запрос, определить параметры и тело запроса.
    6. Отправить интересующий запрос, нажав на кнопку "Send".  
3. Postman 2
    1. Зарегистрироваться в Postman.
    2. Использовать web-версию или клиентское приложение.
    3. Принять приглашение по [ссылке](https://app.getpostman.com/join-team?invite_code=83fe1c7315ea1aac8267a931ffff6ba2&target_code=da3cd756ef30976345e4be6574f343a1).
    4. Перейти в коллекцию `lab4_message_server`, `lab4_post_server` или `lab4_user_server`.
    5. Выбрать интересующий запрос, определить параметры и тело запроса.
    6. Отправить интересующий запрос, нажав на кнопку "Send".  